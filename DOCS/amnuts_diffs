+------------------------------------------------------------------------------+
     DIFFERENCES - DIFFERENCES - DIFFERENCES - DIFFERENCES - DIFFERENCES
        Information on the changes between different version of Amnuts
+------------------------------------------------------------------------------+

2.1.0
-----

Added the option 'key' to the .people command to show what the logon stages are.
Corrected some spelling mistakes in code, and lots in the docs (thanks Dmoney for pointing them all out!)
Updated the purge command to use a command line now: -d, -s and -t (default, site and time)
Added the procedure user_logged_on() to give a quick check to see if a user is currently logged on.
Updated 'expire()' a little bit.
Added MAX_GCOM, MAX_XCOMS as defines in the header, gcoms[] and xcoms[] to the user structure.
Added procedures has_gcom() and has_xcom(), and updated exec_com() to call them.
Added the commands 'xcom' and 'gcom', and the procedures get_xgcom(), set_xgcom(), user_xcom(), user_gcom()
Added swear check for (b)bcast
Fixed slight bug in create_clone so it now displays the clone's name properly recapped
Moved the wiping of messages into one procedure 'wipe_messages' and updated 'dmail()', 'wipe_board()' and 'delete_suggestions()' to incorporate this.  Also added proper grammer to these procedures. All of this should fix some funny deletion counts that people used to get.
Updated 'suggestions()' to check for a remote user (remote users shouldn't use this command), and also some cosmetic changes.
Added the command 'sfrom' - does the equiv. of from/bfrom but for suggestions.  Added the procedure 'suggestions_from()'.
Fixed it so that if a user is invis and logged on then they won't show up in the '.last' list to any user under their level
Added am/pm indicator for long date instead of 24-hour clock (as shown on mail messages, board, etc)
Updated the procedure 'login()' so that motd2 is displayed until the user presses return to continue.
Added bounds checking when entering an email or homepage with the .set command
Added command 'rloadrm' to reload a room's description - added the procedure 'reload_room_description()' for this command
Changed .cmdcount so that a user can only see the commands they have access to.
Altered .setcmdlev so you can give abbreviated command names (as in xcom/gcom)
Added a prompt when user does '.dmail all' so that they can decide to delete all their mail or not.
Some cosemetic changes made
Fixed a bug with the viewing of pictures
Fixed the problem with 'censor_swear_words' in that it would only censor words all in lower case.  Now, with the addition of the 'istrstr' fuction it performs the censor without worrying about case.
Fixed a bug in the quick call section of tell() that could cause a crash
Added the ability to have users auto-promoted after they enter a desc, gender and use the accreq command.  I also added the ability to toggle the default setting (stored in the config file as 'auto_promote') with the command .autopromo
Made the making of strings plural much better by now using pre-processor macros
Made .grepu ignore case
Converted the code more over to ANSI standard and added the prototype header file.  (thanks to 'Rudder' for the ANSI converted Amnuts 2.0.1 which I worked from).  And also fixed a couple conflictions along the way.
Added a new structre called wiz_list_struct and the two procedures 'add_wiz_node' and 'rem_wiz_node'.  I found that if you have a lot of users (say, 700 or more) in total than doing a wizlist may produce slow results as it has to go through all the user list.  With just scrolling through the wiz_list_struct than the results are a lot faster (though at the cost of a little more memory).  Updated wiz_list() to use this new structure and also fixed the bug that would mean if only 4 wizzes are of a level (eg, 4 users of WIZ level) then it would display "[none listed]" on the .wizlist.  Now it'll display them as normal.
Added the command 'sayto' and gave it the alias '-'.  This has meant that the alias for echo has now changed to '+'.  Also at this point have updated the command 'say' so that if a user puts :) ;) :( 8) etc at the end of their message, then it will say "User smiles:", "User winks:", "User frowns", etc.
Have made it so that if a user is in a private room then they can still swear even if swearban is on.  (I changed this because I had soooo many people ask for it on my own talker that I took a guess that it might happen anywhere else)
Users can now store their ICQ numbers (entered with the 'set' command)
Added the commands 'friend', 'fsay' and 'femote' - you can add people to your friends list and have the talker alert you if they log on.  Also updated the 'set' command to include 'alert'
Changed the name of the function 'find_user_directory' to 'find_user_listed' as it now just returns 1 or 0 - if the user is on the user linked list of not (respectively).  This change has come about because the directory structure has been changed once again to make it easier for people to code and also to cut out a few function calls.  All the .D files are now in USERFILES and the mail, profiles, etc are all in their own directories.
Removed the 'verbose_mode' from the config file and the reading of it.
Removed the procedure 'move_files' and any references to it as it has been made obsolete by storing the userfiles in one directory.  Also wrote a program to move all the userfiles if you are using a version previous to 2.1.0.
Renamed the procedure (and calls to) 'change_user_directory' to 'user_list_level' to make it more obvious (though I guess that's open to conjecture ;)
Added the command 'force' and the procedures to go with it.
Change the procedure 'mail_count' to 'mail_sizes' and updated its input and return values.
Changed the way mail files are saved slightly so that now the number of new mails and the size of the file is saved at the beginning of the mail file.  Have also changed the login and ustat, etc, to display how many new mails hte user has.  Also have updated the 'rmail' command so that a user can enter 'rmail new' and just read their new mail.
Added the 'calendar' command, along with updating the header file for compenents of this command and adding the procedures is_leap, month_to_days, year_to_days, ymd_to_scalar, scalar_to_ymd, is_ymd_today and show_calendar.
Added the command 'fwho' to list your friends who are logged on.
Added the preprocessor macro 'PLTEXT_IS' to give better is/are gramatical text.  And also one called PLTEXT_WAS for better was/were grammer.
Have added personal rooms (due to much asking for this feature).  This includes the command myroom, mylock, mypaint, visit.  has_room_access has been updated to take the personal room lock status into consideration.  The procedures/functions 'personal_room', 'personal_room_lock', 'personal_room_visit', 'personal_room_decorate', 'personal_room_store', 'is_personal_room', 'is_my_room', 'get_room_full' and 'destruct_room' have been added, as well as the defines PERSONAL_UNLOCKED and PERSONAL_LOCKED.  The room_struct has been updated to make it a doubly linked list and the function (for future updates).  The rooms and rnet command will not display the personal rooms, only the config set rooms.  The wipe command has also been updated so that users can wipe any messages in their own room.  I have made it so that any message boards in personal room are stored in the same directory as the personal room files (ie, USERFILES/USERROOMS).  The lock status and title and room desc are all saved.  If users want to remove their own rooms then they can use the '-d' option with the myroom command.
When a user swaps session the site of their new session will be recorded in the syslog.
Updated the check_directories function to check for the new structure.
Added the option 'personal_rooms' to the config file so you can turn them on/off (as well as the commands) at boot time.
Updated the commands 'promote' and 'demote' to take an optional <level> attribute to set a user directly to that level.  Also works without the <level> option.
Now if you use an emote command (emote, semote, pemote, femote and cemote) with the string "'s" then it will space it correctly.  Eg, ";'s talker" will result in "Andy's talker" rather than "Andy 's talker".
Updated the command memcount to show even more structures.
Improved the 'last command' logs.  As a result, I added the new directory 'lastcmdlogs' and I changed the procedure name 'write_last_command' to 'record_last_command' and added the procedure 'dump_commands'.
Updated all of the helpfiles and create a new set of rooms and a new map.
Added the ability to have multiple MOTD files for pre- and post-login.  This has meant an extra directory, motds, has been created with the dirs motd1 and motd2 in it.  Each of the motd files HAS to be named such as 'motdn' where n is the next consequtive number.  motd files start from 1, ie, motd1, motd2, motd2, etc.
Have updated the command 'recount' so that it can take the option 'motds' incase you manually update the motds.
Changed the levels of some commands
Stopped remote users from executing a few more certain commands that could cause a security problem (eg, shutdown, reboot, nuke, etc)
Removed slight bug in parse_room_topics
Made load_oldversion_user fuction compatible with file version from 2.0.1, 2.0.0 and 1.4.2.  It defaults to loading user files from version 1.4.2 if no other version number can be determined.


2.0.1
-----

Fixed bug in netlink that showed a remote user without a user name (tested with a NUTS remote talker)
Fixed a couple more bugs - one that would cause some level counts to reset, and one that would make the counts hugely over the limit.
Added email validation for '.set email' to see if it's of the right kinda format
Rearranged count_users() to be process_user() and count_users()
A few cosmetic tidy-ups
Fix total user counts when nuking/suiciding

2.0.0
-----

Now store all the user's names and level in a dynamically linked list on
start-up.  This allows quick scrolling through the users rather than reading a
file, and it also means that the user's files can be split up into different
directories (the directories having the same names as the talker levels).
Commands are also stored in a linked list now.

I kept a record of (almost) everything I changed for version 2.0.0, but as there
is a lot of text I'm not even going to bother to format it nicely just yet. If
you don't like it, then bite me ;)

changed count_users() to use dynamic directory reading instead or reading a list.
updated clean_files() to take a 'level' parameter.
removed add_level_list() and clean_level_list() as they're now redundant.
removed all instances (calls) to the above 2 procedures.
updated show_version()
added the procedures: find_user_directory(), in_user_directory(), add_user_level(), rem_user_level()
removed the procedures: in_userlist(), clean_userlist(), add_userlist()
changed all calls to open USERFILES to incorporate the level name
added command line variables for when booting the talker, also allowing automatic setup of the directories and quiet boot up.
added procedure: process_command_line(), setup_directory_structure()
added procedure: move_files(), change_user_directory()
added proper grammar (eg, '1 message' instead of '1 messages', or 'there is 1' rather than 'there are 1')
added an ! to the prompt to show if ignoring anything (though doesn't represent what)
changed toggle_colour() to display_colour
added the command 'memcount'
changed the "colour code display" character '%' to a '^' as this seemed to cause an obscure bug (though not harmful)
improved '.last' to also display the last x users to log on, also added new structure to header file for this and the procedures record_last_login() and record_last_logout()
added procedures count_lines, remove_top_bottom()
added the ability to toggle on/off room descriptions (.set rdesc)
changed procedure command_order() to parse_commands() and dynamically loaded memory for each command.  Stored the commands in a linked list (ordered).
changed user variable hwrap_com to hwrap_id and added hwrap_same and hwrap_func
reworked the help_commands() procedure so that: 1) it worked with the linked list and 2) fixed a little bug that might appear on some terminals that didn't handle the \r escape code correctly.
added the options 'rdesc' and 'command' to the set command.
added the int 'cmd_type' to the user structure and updated load_user_details and save_user_details procedures accordingly.
Done a little re-arranging to misc_ops to make things in a better order.
added the ability to change how the commands are listed - either the traditional method (ie, by level) or by function.
made wizlist work with the user structure.
added the ability to have a full swear ban, where it gives you a message saying you cannot swear, or a min swear ban where it will replace any of the swear words with a default string (see below).
fixed it in say() so that you can no longer swear through a netlink or clone even if the swear_ban is on.
added new swear_ban check to procedures say, shout, tell, emote, semote, pemote, echo, wizshout, wizemote, mutter, think_it, sing_it
added the procedures: censor_swear_words, replace_string
added a new #define's to the header file called 'swear_censor', 'OFF', 'MIN', and 'MAX'
added new procedure 'minmax_check'
changed 'ban_swearing' in the config file so that it reads either OFF, MIN or MAX (rather than YES or NO)
updated 'swban' to incorporate the new levels of banning and renamed it 'toggle_swearban'
purge procedure updated to use linked user directory list - reduced size of procedure
added a version check for users so that you no longer have to nuke any old user structures as they load up properly and same as the new format.
added procedure: load_oldversion_user
add 'version' to user structure
added 'talker_name' to the header file.
completely rearranged code and made it more tidy
changed sug_num to suggestion_count
added command 'cmdcount' to show command statistics, also added show_command_counts procedure
added procedure 'ordinal_text' to return the ordinal of an int.
added procedure 'reset_user' to put all user attributes to a default value - including name.
The above fixes a bug which could either be useful, or annoying - depending on how you looked at it.  The bug was as follows:
  If a user entered a wizzes name at the login prompt, messed up the password and then done a 'who' then they could see any invis users.
  Then, if that user logged in as a newbie the newbie character would possess the wizzes stats - login time, number, age, email, etc.  though NOT their level.
added the #defines LOGIN_NAME, LOGIN_PASSWD, LOGIN_CONFIRM, LOGIN_PROMPT, LOGIN_ATTEMPTS and updated attempts() and login() to use them
added user_page_pos and user_page_lev to user structure
updated exec_com to incriment the number of times a command has been used.
added crypt_salt to header file
added command 'rcountu' and procedure 'recount_users' to re-read all of the users and check if they are listed or not.
added 'date' variable to the user_dir_struct and user_struct and the command add_user_date_node
updated connect_user to show if user is ignoring anything when they logon
added 'recap' to the user structure and made changes through-out the code so that the recap name is show.
removed allow_caps_in_name and anything associated with it as that option has now been made redundant by .set recap - instead has been replaced with 'allow_recaps' as a config option.
added the command 'recaps' to toggle the allow_recap status
fix bug in editor that would show the users name even when they were invis
changed the command name 'plead' to 'sos'
added verbose_boot to the config file and count_users()
added recap to user structure, the set command, and used it throughout the code.
removed the 'new_banned' procedure and integrated it with 'site_banned'.  Removed a big bug out of 'site_banned' that would cause a file pointer to remaing floating around if a match had been found.
added the procedure 'pattern_match' to do recursive matching for a pattern in a string.
updated the mutter() procedure to use write_room_except (thanks Squirt for pointing that one out)
added the command 'setcmdlev' and the procedure 'set_command_level()' to go with it.
added the command 'grepu' to search for user's names using pattern matching
added 'default_shoot' to the header file.  Also added the command 'shoot' and 'reload', and the procedures 'shoot_user' and 'reload_gun'.  Updated the ustat to show fight stats.
changed lmail option 'admin' to 'wizzes' as many people use ADMIN as a level name
removed all LEVEL_LISTs from the header file, with exception of the RETIRE_LIST
added the option 'retired' to the viewlog command
tidied up code more - removing redundant calls, and unused variables.
updated all of the help files.
updated a few things in ban_site and ban_new procedures
made cosmetic changes to some commands
added the procedure 'check_directories' to make sure that the directory structure is correct
updated 'samesite' so that it now works with wildcards * and ?

sent out code for beta testing

fixed bugs in del_user_ndoe and remove_command procedures that would cause bug if first node in list was removed
fixed a small bug in the load_olduser_details procedure and made it compatible with Amnuts 1.4.2 user structures


1.4.2
-----

Made it compatible with compiling under FreeBSD servers.
Updated some docs and sorted out the version numbers which I screwed up in
some places.
Fixed some small bugs, and also fixed a hole in promote() that allowed you
to promote a jailed user.
Added some utilities to the distribution as standard.
Tided up the code to remove any variables that were unused in any of the
functions.

1.4.1
-----

Added the ability to default room topics in the config file.
Put back missing time_out_afks in config file.
Changed the look of the helpfiles and show the level that the helpfile is
for when the user types '.h <command>'.

1.4.0
-----

The samesite command was majorly updated.  The greet command was also
updated to use symbols (!"$%^ etc)
The commands hangman and guess (part of hangman) were added.
Cosmetic stuff changed.
A number of bugs fixed.
Double forking added the the autoforwarding of smail to stop zombie
processes being spawned (or at least a large amount of them being
spawned).  The smail forwarding functions have also been changed.
Added the ability to default purge on/off at boot (from config file).
A user can now choose to see their password when logging in.
(probably more stuff that I cannot remember right now ;)

1.3.0
-----

First proper release to those who asked for it...
Differences between Amnuts and NUTS 3.3.3:
These may not be 100%, but you get the general idea of things that have changed

Display rules when logging in (if rules file exists)
Can review what has been typed in the editor before saving
Help commands are paged
Selective wipe of boards and deleting of mail
Users can wipe their own messages of the boards
Can read specific mail and board messages
Can set up more things in the user profile
Can ban just new users from a site, allowing existing users from that site to still log in
Can have smail autoforwarded to an email address
Can ustat a person even if they are not logged on
Decent name abbreviation parsing when talking to users logged on
Can have macros
Can have level specific rooms
Purges user files automatically or manually when running.  purges can be turned on/off at bootup
Level specific rooms can be viewed along with default rooms
Room listing is paged
Has a buffer for tells when in the line editor
Has a buffer for tells when AFK
Can use wild cards when banning new users from a site or full site ban
Ignores are saved when logging out
Send copies of mail to users on the talker or a remote talker
Send one mail message to individual levels, admin or all users
Can views users stats when they are not logged on
General appearance changes
Levels can have aliases (when listed in .who, etc)
Can check users of the same site when they are logged on or not
Abbreviations for commands shown on the command list, and also more added
Be alerted when friend log on
Screen wrap that works with colour codes (ie, doesn't chop one off half way through)
Pager length can be altered
Another level added as standard
Keeps count of number of users logged on, of what level, overall, etc.

New commands added:
purge, history, expire, bbcast, show, ranks, wizlist,
time, ctopic, copyto, nocopys, set, mutter, makevis,
makeinvis, plead, ptell, preview, picture, greet, think,
sing, ewiz, suggest, rsug, dsug, last, macros, rules,
uninvite, lmail, arrest, unarrest, verify, addhistory,
forwarding, revshout, cshout, ctells, monitor, call, uncall,
ignlist, ignpics, ignwiz, igngreets, ignlogons, ignuser,
create, bfrom, samesite, save, shackle, unshackle, join,
cemote, revafk, cafk, revedit, cedit, listen, hangman, 
guess, retire, unretire

Command names changed:
inphr is now inmsg
outphr is now outmsg
letmein is now knock
status is now ustat
rmst is now rooms
rmsn is now rnet
listbans is now lban
wizshout is now twiz
revclr is now cbuff
delete is now nuke

Commands that have altered how they work:
help, read, wipe, ustat, version, rmail, dmail, from,
rooms, ban, unban, viewlog, colour, bcast

+------------------------------------------------------------------------------+
